\chapter{Design}
This chapter describes the design of the application to be built, this design is based on the requirements gathered previously.
Class diagrams are used to depict the structure of the application and sequence diagrams are used to show the flow of the program. 
Also, the architecture of the appplication is discussed here.

\section{Class Diagram}

\begin{center}
\begin{figure}[h!]
\begin{tikzpicture}
\begin{umlpackage}{GUI}

\end{umlpackage}

\begin{umlpackage}[x=0, y=-3]{Control layer}
\umlclass{MediaPlayer}{
}{

}

\umlclass[x=3]{Downloads}{
}{

}

\umlclass[x=6]{FileManager}{
}{

}

\umlclass[y=-3]{SettingsManager}{
}{

}

\umlclass[x=6, y=-3]{SearchEngine}{
}{

}

\end{umlpackage}

\begin{umlpackage}[x=0, y=-5]{I/O layer}
\umlclass[y=-6]{HttpClient}{
}{

}

\end{umlpackage}

\umlassoc{SettingsManager}{HttpClient}
\umlVHassoc{SearchEngine}{HttpClient}


\end{tikzpicture}
\caption{Class diagram for the client}
\end{figure}
\end{center}

\begin{center}
\begin{figure}[h!]
\begin{tikzpicture}
%\begin{umlpackage}{p}
%\begin{umlpackage}{sp1}

\umlclass[x=-10]{Download}{
  - tracker : char* \\
  - seeders : int \\
  - peers : int \\
  - ratio : double \\
  - download\_speed : double \\
  - size : double \\
  - upload\_speed : double \\
  - download\_percentage : double \\
  - upload\_amount : double \\
  - status : Status
}{
  + start() : void \\
  + resume() : void \\
  + pause() : void
}

\umlclass[x=-1.5, y=-12]{Stream}{
  - tracker : char* \\
  - status : Status
}{
  + start() : void \\
  + resume() : void \\
  + pause() : void \\
  + stop() : void
}
\umlclass[x=-10, y=-12]{DownloadManager}{
  - downloaded : double \\
  - uploaded : double \\
  - downloads : list<Download> \\
  - uploads : list<Upload> \\
}{
  + startStreaming() : bool \\
  + stopStreaming() : bool \\
  + stream() : void \\
  + add(Download download) : void \\
  + removeFromList(int download\_id) : void \\
  + removeFromDisk(int download\_id) : void \\
  + setSpeed(double dspeed, double uspeed)
}

\umlclass[x=-3, y=-6]{HttpServer}{
}{
  + InstallHTTPGateway() : bool \\
  + sendResponse() : void \\
  + sendXMLResponse() : void \\
  + handle\_request(struct evhttp\_request *req, void *arg) : void \\
  + init() : void
}

\umlclass[x=-0.5, y = 2]{SearchEngine}{
}{
  + search(char* filename) : void \\
  + getResults() : char*
}

\umlVHassoc[mult1=1, mult2=*]{HttpServer}{Download}
\umlassoc[mult1=1, mult2=1]{HttpServer}{DownloadManager}
\umlVHassoc[mult1=1, mult2=1]{SearchEngine}{HttpServer}

\umlaggreg[mult1=1, mult2=*]{DownloadManager}{Download}
\umlaggreg[mult1=1, mult2=1]{DownloadManager}{Stream}

\end{tikzpicture}
\label{fig:class_server}
\caption{Class diagram for the server.}
\end{figure}
\end{center}
\clearpage

\section{Dynamic models}

\section{Software Architecture}

