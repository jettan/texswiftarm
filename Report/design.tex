\chapter{Design}

\section{Class Diagram}

\begin{center}
\begin{figure}[h!]
\begin{tikzpicture}
\begin{umlpackage}{GUI}

\end{umlpackage}

\begin{umlpackage}[x=0, y=-3]{Control layer}
\umlclass{MediaPlayer}{
}{

}

\umlclass[x=3]{Downloads}{
}{

}

\umlclass[x=6]{FileManager}{
}{

}

\umlclass[y=-3]{SettingsManager}{
}{

}

\umlclass[x=6, y=-3]{SearchEngine}{
}{

}

\end{umlpackage}

\begin{umlpackage}[x=0, y=-5]{I/O layer}
\umlclass[y=-6]{HttpClient}{
}{

}

\end{umlpackage}

\umlassoc{SettingsManager}{HttpClient}
\umlVHassoc{SearchEngine}{HttpClient}


\end{tikzpicture}
\caption{Class diagram for the client}
\end{figure}
\end{center}

\begin{center}
\begin{figure}[h!]
\begin{tikzpicture}
%\begin{umlpackage}{p}
%\begin{umlpackage}{sp1}

\umlclass[x=-5]{Sendable}{
  - trackers : list<tracker> \\
  - seeders  : list<seeder> \\
  - speed    : double
}{
  + stop() : void \\
  + start() : void \\
  + resume() : void \\
  + pause() : void \\
}

\umlclass[x=-7, y=-6]{Download}{
  - percentage : double
}{
  - isCompletedCallback() : void \\
}

\umlclass[x=-1, y=-6]{Upload}{
  - amount : double
}{
  - isInactiveCallback() : void \\
  - calculateAmountCallback() : void 
}

\umlclass[x=-7, y=-15]{DownloadManager}{
  - downloaded : double \\
  - uploaded : double \\
  - downloads : list<Download> \\
  - uploads : list<Upload>
}{
  + startStreaming() : bool \\
  + stopStreaming() : bool \\
  + stream() : void \\
  + setVisible(Sendable file) : bool \\
  + startDownload(String link) : void \\
  + stopDownload(String link) : void \\
  + pauseDownload(String link) : void \\
  + resumeDownload(String link) : void \\
  + startUpload(String name) : void \\
  + stopUpload(String name) : void
}

\umlclass[x=1.5, y=-13]{HttpServer}{
}{
  + InstallHTTPGateway() : bool \\
  + sendResponse() : void \\
  + sendXMLResponse() : void \\
  + handle\_request(struct evhttp\_request *req, void *arg) : void \\
  + init() : void
}

\umlclass[x=-1.5, y = -17]{DispersyInterface}{
}{

}

\umlVHVinherit{Download}{Sendable}
\umlVHVinherit{Upload}{Sendable}

\umlVHassoc{HttpServer}{Sendable}
\umlVHassoc{DispersyInterface}{HttpServer}

\umlVHVaggreg[mult1=1, mult2=*]{DownloadManager}{Upload}
\umlVHVaggreg[mult1=1, mult2=*]{DownloadManager}{Download}

\end{tikzpicture}
\label{fig:class_server}
\caption{Class diagram for the server.}
\end{figure}
\end{center}
\clearpage

\section{Dynamic models}

\section{Software Architecture}

